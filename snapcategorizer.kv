#: import FadeTransition kivy.uix.screenmanager.FadeTransition

<AppFrame>:
    orientation: 'vertical'
    Label:
        id: title_label
        text:app.title
        font_size: 30
        size_hint_y: 0.1
        canvas.before:
            Color:
                rgba: 0, 0, 0, 1 # 赤色を指定
            Rectangle:
                pos: self.pos
                size: self.size

    CameraWidget:
                    
<CameraWidget@Widget>:
    CameraPreview:
        buttongrid:buttongrid
        id:camerapreview
        size: root.size

    BoxLayout:
        orientation: 'vertical'
        size: root.size

        ButtonGrid:
            camera_preview:camerapreview
            buttongrid:buttongrid
            id:buttongrid
            rows:4
            cols:3
            size: root.size

            # ATButton:
            #     custom_id: 'btn0'
            #     text: camerapreview.btn_name[0]

            # ATButton:
            #     custom_id: 'btn1'
            #     text: camerapreview.btn_name[1]

            # ATButton:
            #     custom_id: 'btn2'
            #     text: camerapreview.btn_name[2]

            # ATButton:
            #     custom_id: 'btn3'
            #     text: camerapreview.btn_name[3]

            # ATButton:
            #     custom_id: 'btn4'
            #     text: camerapreview.btn_name[4]

            # ATButton:
            #     custom_id: 'btn5'
            #     text: camerapreview.btn_name[5]

            # ATButton:
            #     custom_id: 'btn6'
            #     text: camerapreview.btn_name[6]

            # ATButton:
            #     custom_id: 'btn7'
            #     text: camerapreview.btn_name[7]

            # ATButton:
            #     custom_id: 'btn8'
            #     text: camerapreview.btn_name[8]

            # ATButton:
            #     custom_id: 'btn9'
            #     text: camerapreview.btn_name[9]

            # ATButton:
            #     custom_id: 'btn10'
            #     text: camerapreview.btn_name[10]

            # ATButton:
            #     custom_id: 'btn11'
            #     text: camerapreview.btn_name[11]
                

        BoxLayout:
            size_hint_y: 0.2
            Button:
                text: "I/O"
                background_color: 1,1,1,0
                color: 1,.3,.3,.5
                font_size:35
                bold:True
                on_press:camerapreview.play()
                                    
            Button:
                text: "[1]"
                background_color: 1,1,1,0
                color: 1,.3,.3,.5
                font_size:35
                bold:True
                on_press:buttongrid.add_buttons()
                                    
            Button:
                text: "[2]"
                background_color: 1,1,1,0
                color: 1,.3,.3,.5
                font_size:35
                bold:True
                on_press:buttongrid.add_buttons(offset = 12)
                                    
            Button:
                text: "[3]"
                background_color: 1,1,1,0
                color: 1,.3,.3,.5
                font_size:35
                bold:True
                on_press:buttongrid.add_buttons(offset = 24)
                
            # Button:
            #     text: "Default"
            #     background_color: 1,1,1,0
            #     color: 1,.3,.3,.5
            #     font_size:35
            #     bold:True
            #     on_press:camerapreview.load_default_settings()
            Button:
                text: "Max"
                background_color: 1,1,1,0
                color: 1,.3,.3,.5
                font_size:35
                bold:True
                on_press:camerapreview.add_button()


<PopupMenu>
    orientation: 'vertical'
    id:popup_menu
    popup_text: ['btn4','4','コリコリ']
    title:root.popup_text[0]

    TextInput:
        id: input2
        input_filter: 'int'
        input_type: 'number'
        text: root.popup_text[1]
        multiline:False

    TextInput:
        id: input3
        input_type: 'text'
        text: root.popup_text[2]
        multiline:False

    Button:
        text: 'Save&Close'
        on_release: 
            root.update_setting(root.popup_text[0], input2.text, input3.text)
            root.popup_close()